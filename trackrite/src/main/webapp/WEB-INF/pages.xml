<?xml version="1.0" encoding="UTF-8"?>

<pages xmlns="http://jboss.com/products/seam/pages"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://jboss.com/products/seam/pages http://jboss.com/products/seam/pages-2.1.xsd"
       no-conversation-view-id="/home.xhtml"
       login-view-id="/login.xhtml">

	<page view-id="/admin/*">
        <restrict>#{s:hasRole('admin')}</restrict>
     </page>
    
    <page view-id="/adminLogin.xhtml">     
        <navigation from-action="#{identity.login}">
           <redirect view-id="/admin/entities/summary.xhtml"/>
        </navigation>
	</page>

	
	<page view-id="*">
        <navigation>
        	<rule if-outcome="home">
                <redirect view-id="/home.xhtml"/>
            </rule>
        
            <rule if-outcome="employee">
                <redirect view-id="/admin/entities/domain/employee/listEmployee.xhtml" />
            </rule>
            
            <rule if-outcome="viewEmployee">
                <redirect view-id="/admin/entities/domain/employee/viewEmployee.xhtml" />
            </rule>
        
            <rule if-outcome="department">
                <redirect view-id="/admin/entities/domain/department/listDepartment.xhtml" />
            </rule>
            
            <rule if-outcome="viewDepartment">
                <redirect view-id="/admin/entities/domain/department/viewDepartment.xhtml" />
            </rule>
        
            <rule if-outcome="endUser">
                <redirect view-id="/admin/entities/domain/endUser/listEndUser.xhtml" />
            </rule>
            
            <rule if-outcome="viewEndUser">
                <redirect view-id="/admin/entities/domain/endUser/viewEndUser.xhtml" />
            </rule>
        
            <rule if-outcome="project">
                <redirect view-id="/admin/entities/issues/project/listProject.xhtml" />
            </rule>
            
            <rule if-outcome="viewProject">
                <redirect view-id="/admin/entities/issues/project/viewProject.xhtml" />
            </rule>
        
            <rule if-outcome="issue">
                <redirect view-id="/admin/entities/issues/issue/listIssue.xhtml" />
            </rule>
            
            <rule if-outcome="viewIssue">
                <redirect view-id="/admin/entities/issues/issue/viewIssue.xhtml" />
            </rule>
        
            <rule if-outcome="user">
                <redirect view-id="/admin/entities/users/user/listUser.xhtml" />
            </rule>
            
            <rule if-outcome="viewUser">
                <redirect view-id="/admin/entities/users/user/viewUser.xhtml" />
            </rule>
        
            <rule if-outcome="role">
                <redirect view-id="/admin/entities/users/role/listRole.xhtml" />
            </rule>
            
            <rule if-outcome="viewRole">
                <redirect view-id="/admin/entities/users/role/viewRole.xhtml" />
            </rule>
        
            <rule if-outcome="timeTrackingEntry">
                <redirect view-id="/admin/entities/timetrack/timeTrackingEntry/listTimeTrackingEntry.xhtml" />
            </rule>
            
            <rule if-outcome="viewTimeTrackingEntry">
                <redirect view-id="/admin/entities/timetrack/timeTrackingEntry/viewTimeTrackingEntry.xhtml" />
            </rule>
        
        </navigation>
    </page>

    
    
    <page view-id="/admin/entities/domain/employee/editEmployee.xhtml" conversation-required="false" >
    	<!-- <description>Edit Employee: #{employee.displayName}</description> -->
    	<navigation> 
			 <rule if-outcome="save">
 				<redirect view-id="/admin/entities/domain/employee/viewEmployee.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/domain/employee/listEmployee.xhtml" />
            </rule>			
		</navigation>
		<param name="employeeId" value="#{employeeAction.employeeId}" />
		<param name="departmentId" value="#{employeeAction.departmentId}" />
		
	</page>
	
	 <page view-id="/admin/entities/domain/employee/viewEmployee.xhtml" conversation-required="false" >
	 	<!-- <description>View Employee: #{employee.displayName}</description> -->
	 	<navigation> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/domain/employee/editEmployee.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/domain/employee/listEmployee.xhtml" />
            </rule>			
		</navigation>
		<param name="employeeId" value="#{employeeAction.employeeId}" />
	</page>
	
	<page view-id="/admin/entities/domain/employee/listEmployee.xhtml" action="#{redirect.captureCurrentView()}" >
		<navigation>
			<rule if-outcome="viewEmployee">
				<redirect view-id="/admin/entities/domain/employee/viewEmployee.xhtml" />
			</rule> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/domain/employee/editEmployee.xhtml" />
            </rule>			
		</navigation>
		
		<param name="firstResult" value="#{employeeList.firstResult}" />
		<param name="sort" value="#{employeeList.orderColumn}" />
		<param name="dir" value="#{employeeList.orderDirection}" />

		<param name="from" />
		<param name="id" value="#{employeeList.employee.id}" />
	 <param name="employee_department" value="#{employeeList.employee.department}" validateModel="false" /> 	
	 <param name="employee_employeeNumber" value="#{employeeList.employee.employeeNumber}" validateModel="false" /> 	
	 <param name="employee_employeeType" value="#{employeeList.employee.employeeType}" validateModel="false" /> 	
	 <param name="person_firstName" value="#{employeeList.employee.firstName}" validateModel="false" /> 	
	 <param name="person_lastName" value="#{employeeList.employee.lastName}" validateModel="false" /> 	
	 <param name="user_userName" value="#{employeeList.employee.user.userName}" validateModel="false" /> 	
	 <param name="user_enabled" value="#{employeeList.employee.user.enabled}" validateModel="false" /> 	
	 <param name="user_email" value="#{employeeList.employee.user.email}" validateModel="false" /> 	
		
	</page>
    
    <page view-id="/admin/entities/domain/department/editDepartment.xhtml" conversation-required="false" >
    	<!-- <description>Edit Department: #{department.displayName}</description> -->
    	<navigation> 
			 <rule if-outcome="save">
 				<redirect view-id="/admin/entities/domain/department/viewDepartment.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/domain/department/listDepartment.xhtml" />
            </rule>			
		</navigation>
		<param name="departmentId" value="#{departmentAction.departmentId}" />
		
	</page>
	
	 <page view-id="/admin/entities/domain/department/viewDepartment.xhtml" conversation-required="false" >
	 	<!-- <description>View Department: #{department.displayName}</description> -->
	 	<navigation> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/domain/department/editDepartment.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/domain/department/listDepartment.xhtml" />
            </rule>			
		</navigation>
		<param name="departmentId" value="#{departmentAction.departmentId}" />
	</page>
	
	<page view-id="/admin/entities/domain/department/listDepartment.xhtml" action="#{redirect.captureCurrentView()}" >
		<navigation>
			<rule if-outcome="viewDepartment">
				<redirect view-id="/admin/entities/domain/department/viewDepartment.xhtml" />
			</rule> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/domain/department/editDepartment.xhtml" />
            </rule>			
		</navigation>
		
		<param name="firstResult" value="#{departmentList.firstResult}" />
		<param name="sort" value="#{departmentList.orderColumn}" />
		<param name="dir" value="#{departmentList.orderDirection}" />

		<param name="from" />
		<param name="id" value="#{departmentList.department.id}" />
	 <param name="department_name" value="#{departmentList.department.name}" validateModel="false" /> 	
		
	</page>
    
    <page view-id="/admin/entities/domain/endUser/editEndUser.xhtml" conversation-required="false" >
    	<!-- <description>Edit EndUser: #{endUser.displayName}</description> -->
    	<navigation> 
			 <rule if-outcome="save">
 				<redirect view-id="/admin/entities/domain/endUser/viewEndUser.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/domain/endUser/listEndUser.xhtml" />
            </rule>			
		</navigation>
		<param name="endUserId" value="#{endUserAction.endUserId}" />
		
	</page>
	
	 <page view-id="/admin/entities/domain/endUser/viewEndUser.xhtml" conversation-required="false" >
	 	<!-- <description>View EndUser: #{endUser.displayName}</description> -->
	 	<navigation> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/domain/endUser/editEndUser.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/domain/endUser/listEndUser.xhtml" />
            </rule>			
		</navigation>
		<param name="endUserId" value="#{endUserAction.endUserId}" />
	</page>
	
	<page view-id="/admin/entities/domain/endUser/listEndUser.xhtml" action="#{redirect.captureCurrentView()}" >
		<navigation>
			<rule if-outcome="viewEndUser">
				<redirect view-id="/admin/entities/domain/endUser/viewEndUser.xhtml" />
			</rule> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/domain/endUser/editEndUser.xhtml" />
            </rule>			
		</navigation>
		
		<param name="firstResult" value="#{endUserList.firstResult}" />
		<param name="sort" value="#{endUserList.orderColumn}" />
		<param name="dir" value="#{endUserList.orderDirection}" />

		<param name="from" />
		<param name="id" value="#{endUserList.endUser.id}" />
	 <param name="person_firstName" value="#{endUserList.endUser.firstName}" validateModel="false" /> 	
	 <param name="person_lastName" value="#{endUserList.endUser.lastName}" validateModel="false" /> 	
	 <param name="user_userName" value="#{endUserList.endUser.user.userName}" validateModel="false" /> 	
	 <param name="user_enabled" value="#{endUserList.endUser.user.enabled}" validateModel="false" /> 	
	 <param name="user_email" value="#{endUserList.endUser.user.email}" validateModel="false" /> 	
		
	</page>
    
    <page view-id="/admin/entities/issues/project/editProject.xhtml" conversation-required="false" >
    	<!-- <description>Edit Project: #{project.displayName}</description> -->
    	<navigation> 
			 <rule if-outcome="save">
 				<redirect view-id="/admin/entities/issues/project/viewProject.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/issues/project/listProject.xhtml" />
            </rule>			
		</navigation>
		<param name="projectId" value="#{projectAction.projectId}" />
		
	</page>
	
	 <page view-id="/admin/entities/issues/project/viewProject.xhtml" conversation-required="false" >
	 	<!-- <description>View Project: #{project.displayName}</description> -->
	 	<navigation> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/issues/project/editProject.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/issues/project/listProject.xhtml" />
            </rule>			
		</navigation>
		<param name="projectId" value="#{projectAction.projectId}" />
	</page>
	
	<page view-id="/admin/entities/issues/project/listProject.xhtml" action="#{redirect.captureCurrentView()}" >
		<navigation>
			<rule if-outcome="viewProject">
				<redirect view-id="/admin/entities/issues/project/viewProject.xhtml" />
			</rule> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/issues/project/editProject.xhtml" />
            </rule>			
		</navigation>
		
		<param name="firstResult" value="#{projectList.firstResult}" />
		<param name="sort" value="#{projectList.orderColumn}" />
		<param name="dir" value="#{projectList.orderDirection}" />

		<param name="from" />
		<param name="id" value="#{projectList.project.id}" />
	 <param name="project_name" value="#{projectList.project.name}" validateModel="false" /> 	
	 <param name="project_description" value="#{projectList.project.description}" validateModel="false" /> 	
		
	</page>
    
    <page view-id="/admin/entities/issues/issue/editIssue.xhtml" conversation-required="false" >
    	<!-- <description>Edit Issue: #{issue.displayName}</description> -->
    	<navigation> 
			 <rule if-outcome="save">
 				<redirect view-id="/admin/entities/issues/issue/viewIssue.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/issues/issue/listIssue.xhtml" />
            </rule>			
		</navigation>
		<param name="issueId" value="#{issueAction.issueId}" />
		<param name="projectId" value="#{issueAction.projectId}" />
		<param name="developerId" value="#{issueAction.developerId}" />
		
	</page>
	
	 <page view-id="/admin/entities/issues/issue/viewIssue.xhtml" conversation-required="false" >
	 	<!-- <description>View Issue: #{issue.displayName}</description> -->
	 	<navigation> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/issues/issue/editIssue.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/issues/issue/listIssue.xhtml" />
            </rule>			
		</navigation>
		<param name="issueId" value="#{issueAction.issueId}" />
	</page>
	
	<page view-id="/admin/entities/issues/issue/listIssue.xhtml" action="#{redirect.captureCurrentView()}" >
		<navigation>
			<rule if-outcome="viewIssue">
				<redirect view-id="/admin/entities/issues/issue/viewIssue.xhtml" />
			</rule> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/issues/issue/editIssue.xhtml" />
            </rule>			
		</navigation>
		
		<param name="firstResult" value="#{issueList.firstResult}" />
		<param name="sort" value="#{issueList.orderColumn}" />
		<param name="dir" value="#{issueList.orderDirection}" />

		<param name="from" />
		<param name="id" value="#{issueList.issue.id}" />
	 <param name="issue_title" value="#{issueList.issue.title}" validateModel="false" /> 	
	 <param name="issue_description" value="#{issueList.issue.description}" validateModel="false" /> 	
	 <param name="issue_project" value="#{issueList.issue.project}" validateModel="false" /> 	
	 <param name="issue_status" value="#{issueList.issue.status}" validateModel="false" /> 	
	 <param name="issue_priority" value="#{issueList.issue.priority}" validateModel="false" /> 	
	 <param name="issue_developer" value="#{issueList.issue.developer}" validateModel="false" /> 	
		
	</page>
    
    <page view-id="/admin/entities/users/user/editUser.xhtml" conversation-required="false" >
    	<!-- <description>Edit User: #{user.displayName}</description> -->
    	<navigation> 
			 <rule if-outcome="save">
 				<redirect view-id="/admin/entities/users/user/viewUser.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/users/user/listUser.xhtml" />
            </rule>			
		</navigation>
		<param name="userId" value="#{userAction.userId}" />
		
	</page>
	
	 <page view-id="/admin/entities/users/user/viewUser.xhtml" conversation-required="false" >
	 	<!-- <description>View User: #{user.displayName}</description> -->
	 	<navigation> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/users/user/editUser.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/users/user/listUser.xhtml" />
            </rule>			
		</navigation>
		<param name="userId" value="#{userAction.userId}" />
	</page>
	
	<page view-id="/admin/entities/users/user/listUser.xhtml" action="#{redirect.captureCurrentView()}" >
		<navigation>
			<rule if-outcome="viewUser">
				<redirect view-id="/admin/entities/users/user/viewUser.xhtml" />
			</rule> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/users/user/editUser.xhtml" />
            </rule>			
		</navigation>
		
			
		
	</page>
    
    <page view-id="/admin/entities/users/role/editRole.xhtml" conversation-required="false" >
    	<!-- <description>Edit Role: #{role.displayName}</description> -->
    	<navigation> 
			 <rule if-outcome="save">
 				<redirect view-id="/admin/entities/users/role/viewRole.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/users/role/listRole.xhtml" />
            </rule>			
		</navigation>
		<param name="roleId" value="#{roleAction.roleId}" />
		
	</page>
	
	 <page view-id="/admin/entities/users/role/viewRole.xhtml" conversation-required="false" >
	 	<!-- <description>View Role: #{role.displayName}</description> -->
	 	<navigation> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/users/role/editRole.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/users/role/listRole.xhtml" />
            </rule>			
		</navigation>
		<param name="roleId" value="#{roleAction.roleId}" />
	</page>
	
	<page view-id="/admin/entities/users/role/listRole.xhtml" action="#{redirect.captureCurrentView()}" >
		<navigation>
			<rule if-outcome="viewRole">
				<redirect view-id="/admin/entities/users/role/viewRole.xhtml" />
			</rule> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/users/role/editRole.xhtml" />
            </rule>			
		</navigation>
		
		<param name="firstResult" value="#{roleList.firstResult}" />
		<param name="sort" value="#{roleList.orderColumn}" />
		<param name="dir" value="#{roleList.orderDirection}" />

		<param name="from" />
		<param name="id" value="#{roleList.role.id}" />
	 <param name="role_name" value="#{roleList.role.name}" validateModel="false" /> 	
		
	</page>
    
    <page view-id="/admin/entities/timetrack/timeTrackingEntry/editTimeTrackingEntry.xhtml" conversation-required="false" >
    	<!-- <description>Edit TimeTrackingEntry: #{timeTrackingEntry.displayName}</description> -->
    	<navigation> 
			 <rule if-outcome="save">
 				<redirect view-id="/admin/entities/timetrack/timeTrackingEntry/viewTimeTrackingEntry.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/timetrack/timeTrackingEntry/listTimeTrackingEntry.xhtml" />
            </rule>			
		</navigation>
		<param name="timeTrackingEntryId" value="#{timeTrackingEntryAction.timeTrackingEntryId}" />
		<param name="employeeId" value="#{timeTrackingEntryAction.employeeId}" />
		<param name="projectId" value="#{timeTrackingEntryAction.projectId}" />
		
	</page>
	
	 <page view-id="/admin/entities/timetrack/timeTrackingEntry/viewTimeTrackingEntry.xhtml" conversation-required="false" >
	 	<!-- <description>View TimeTrackingEntry: #{timeTrackingEntry.displayName}</description> -->
	 	<navigation> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/timetrack/timeTrackingEntry/editTimeTrackingEntry.xhtml" />
            </rule>	
             <rule if-outcome="cancel">
 				<redirect view-id="/admin/entities/timetrack/timeTrackingEntry/listTimeTrackingEntry.xhtml" />
            </rule>			
		</navigation>
		<param name="timeTrackingEntryId" value="#{timeTrackingEntryAction.timeTrackingEntryId}" />
	</page>
	
	<page view-id="/admin/entities/timetrack/timeTrackingEntry/listTimeTrackingEntry.xhtml" action="#{redirect.captureCurrentView()}" >
		<navigation>
			<rule if-outcome="viewTimeTrackingEntry">
				<redirect view-id="/admin/entities/timetrack/timeTrackingEntry/viewTimeTrackingEntry.xhtml" />
			</rule> 
			 <rule if-outcome="edit">
 				<redirect view-id="/admin/entities/timetrack/timeTrackingEntry/editTimeTrackingEntry.xhtml" />
            </rule>			
		</navigation>
		
		<param name="firstResult" value="#{timeTrackingEntryList.firstResult}" />
		<param name="sort" value="#{timeTrackingEntryList.orderColumn}" />
		<param name="dir" value="#{timeTrackingEntryList.orderDirection}" />

		<param name="from" />
		<param name="id" value="#{timeTrackingEntryList.timeTrackingEntry.id}" />
	 <param name="timeTrackingEntry_employee" value="#{timeTrackingEntryList.timeTrackingEntry.employee}" validateModel="false" /> 	
	 <param name="timeTrackingEntry_hours" value="#{timeTrackingEntryList.timeTrackingEntry.hours}" validateModel="false" /> 	
	 <param name="timeTrackingEntry_details" value="#{timeTrackingEntryList.timeTrackingEntry.details}" validateModel="false" /> 	
	 <param name="timeTrackingEntry_date" value="#{timeTrackingEntryList.timeTrackingEntry.date}" validateModel="false" /> 	
	 <param name="timeTrackingEntry_project" value="#{timeTrackingEntryList.timeTrackingEntry.project}" validateModel="false" /> 	
		
	</page>
    
    
    

    <exception class="org.jboss.seam.framework.EntityNotFoundException">
        <redirect view-id="/error.xhtml">
            <message severity="warn">Record not found</message>
        </redirect>
    </exception>
    
    <exception class="javax.persistence.EntityNotFoundException">
        <redirect view-id="/error.xhtml">
            <message severity="warn">Record not found</message>
        </redirect>
    </exception>
    
    <exception class="javax.persistence.EntityExistsException">
        <redirect view-id="/error.xhtml">
            <message severity="warn">Duplicate record</message>
        </redirect>
    </exception>
    
    <exception class="javax.persistence.OptimisticLockException">
        <end-conversation/>
        <redirect view-id="/error.xhtml">
            <message severity="warn">Another user changed the same data, please try again</message>
        </redirect>
    </exception>
    
    <exception class="org.jboss.seam.security.AuthorizationException">
        <redirect view-id="/error.xhtml">
            <message severity="error">You don't have permission to access this resource</message>
        </redirect>
    </exception>
    
    <exception class="org.jboss.seam.security.NotLoggedInException">
        <redirect view-id="/login.xhtml">
            <message severity="warn">#{messages['org.jboss.seam.NotLoggedIn']}</message>
        </redirect>
    </exception>
    
    <exception class="javax.faces.application.ViewExpiredException">
        <redirect view-id="/error.xhtml">
            <message severity="warn">Your session has timed out, please try again</message>
        </redirect>
    </exception>
    
    <exception class="org.jboss.seam.ConcurrentRequestTimeoutException" log-level="trace">
      <http-error error-code="503" />
    </exception>
     
    <exception>
        <redirect view-id="/error.xhtml">
            <message severity="error">Unexpected error, please try again</message>
        </redirect>
    </exception>
    
</pages>
